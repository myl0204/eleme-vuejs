webpackJsonp([1],{"+JyT":function(t,s,e){"use strict";var a=e("m3es"),i=e.n(a),n=e("eAKN"),o=e("9Gt8"),r=e("CEG9");s.a={props:{seller:{type:Object}},components:{Amount:n.a,ShopCart:o.a,Food:r.a},data:function(){return{classMap:["decrease","discount","special","invoice","guarantee"],goods:[],foodsHeight:[0],scrollY:0,selectedFood:{ratings:[]}}},created:function(){var t=this;this.$http.get("api/goods").then(function(s){s=s.body,0===s.errno&&(t.goods=s.data,t.$nextTick(function(){t._calculateHeight(),t._initScroll()}))})},computed:{currentIndex:function(){for(var t=0;t<this.foodsHeight.length;t++){var s=this.foodsHeight[t],e=this.foodsHeight[t+1];if(!e||this.scrollY>=s&&this.scrollY<e)return t}return 0},goodsTypeCount:function(){var t=[];return this.goods.forEach(function(s){var e=0;s.foods.forEach(function(t){e+=t.count}),t.push(e)}),t},selectedFoods:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},methods:{_calculateHeight:function(){for(var t=this.$refs.foods.getElementsByClassName("foods-type"),s=0,e=0;e<t.length;e++)s+=t[e].clientHeight,this.foodsHeight.push(s)},_initScroll:function(){var t=this;this.menuScroll=new i.a(this.$refs["goods-type"],{bounce:!1,click:!0}),this.foodsScroll=new i.a(this.$refs.foods,{bounce:!1,click:!0,probeType:3}),this.foodsScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y)),t.scrollMenu()})},scrollFoods:function(t){this.foodsScroll.scrollTo(0,-this.foodsHeight[t]),this.scrollY=this.foodsHeight[t]},scrollMenu:function(){this.menuScroll.scrollToElement(this.$refs["goods-type"].getElementsByClassName("current")[0],300)},selectFood:function(t,s){var e=this;this.selectedFood=t,"amount"!==s.target.dataset.flag&&this.$nextTick(function(){e.$refs["food-detail"].showDetail()})}}}},0:function(t,s){},"0G9v":function(t,s,e){"use strict";function a(t){e("mpyR")}var i=e("q6IL"),n=e("NOy6"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,"data-v-cc24421a",null);s.a=c.exports},"1XBM":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"content-wrapper clearfix"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{alt:"商家图标",width:"64",height:"64",src:t.seller.avatar}})]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),t._v(" "),e("div",{staticClass:"description"},[t._v("\n        "+t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达\n      ")]),t._v(" "),t.seller.supports?e("div",{staticClass:"promotion-wrapper"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),e("span",{staticClass:"promotion"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t._v(" "),t.seller.supports?e("div",{staticClass:"promotion-count",on:{click:t.showDetail}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),t._v(" "),e("div",{staticClass:"announcement"},[e("span",{staticClass:"bulletin"}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]),t._v(" "),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.detail,expression:"detail"}],ref:"detail",staticClass:"detail"},[e("div",{staticClass:"detail-wrapper"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"star-wrapper"},[e("star",{attrs:{size:48,score:t.seller.score}})],1),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"promotion-list-wrapper"},[e("ul",{staticClass:"promotion-list"},t._l(t.seller.supports,function(s){return e("li",{staticClass:"promotion-item"},[e("span",{staticClass:"icon",class:t.classMap[s.type]}),t._v(t._s(s.description))])}))]),t._v(" "),t._m(1),t._v(" "),e("p",{staticClass:"seller-des"},[t._v(t._s(t.seller.bulletin))])]),t._v(" "),e("div",{staticClass:"detail-close"},[e("i",{staticClass:"icon-close",on:{click:t.hideDetail}})])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"title"},[e("div",{staticClass:"divider"}),t._v(" "),e("h2",{staticClass:"title-name"},[t._v("优惠信息")]),t._v(" "),e("div",{staticClass:"divider"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"title"},[e("div",{staticClass:"divider"}),t._v(" "),e("h2",{staticClass:"title-name"},[t._v("商家公告")]),t._v(" "),e("div",{staticClass:"divider"})])}],n={render:a,staticRenderFns:i};s.a=n},"3dJw":function(t,s,e){"use strict";s.a={props:{ratings:{default:function(){return[]}},contentFlag:{type:Boolean,default:!1},currentType:{type:String,default:"ALL"},positive:{type:Number,defalut:0},negative:{type:Number,defalut:0}},methods:{toggleContent:function(){this.$emit("onlyContent")},selectRatings:function(t){this.$emit("changeRatingType",t)}}}},"94v0":function(t,s,e){"use strict";function a(t){e("JoGw")}var i=e("3dJw"),n=e("P3u6"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},"9Gt8":function(t,s,e){"use strict";function a(t){e("UEaH")}var i=e("cUu/"),n=e("Ae1e"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},"9cao":function(t,s,e){"use strict";function a(t){e("EE5W")}var i=e("INt+"),n=e("f2Ry"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},Ae1e:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-cart-wrapper"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left",on:{click:t.toggleList}},[e("div",{staticClass:"shopping-cart-logo"},[e("div",{staticClass:"logo",class:{highlight:t.hasFood}},[e("i",{staticClass:"icon-shopping_cart",class:{highlight:t.hasFood}})])]),t._v(" "),e("div",{staticClass:"total-price",class:{highlight:t.hasFood}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),e("div",{staticClass:"delivery-price"},[t._v("另需配送费￥"+t._s(t.deliveryPrice))])]),t._v(" "),e("div",{staticClass:"content-right"},[e("div",{staticClass:"payment",class:{highlight:t.totalPrice>=t.minPrice}},[t._v(t._s(t.payInfo))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasFood,expression:"hasFood"}],staticClass:"count"},[t._v(t._s(t.totalCount))])]),t._v(" "),e("transition-group",{key:"ball_drop",attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},t._l(t.balls,function(t,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"ball.show"}],key:"ball-"+s,staticClass:"ball"},[e("div",{staticClass:"inner"})])})),t._v(" "),e("transition",{attrs:{name:"slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&t.hasFood,expression:"show && hasFood"}],staticClass:"selected-list"},[e("div",{staticClass:"list-header"},[e("span",{staticClass:"clear",on:{click:t.emptyList}},[t._v("清空")]),t._v(" "),e("h2",{staticClass:"title"},[t._v("购物车")])]),t._v(" "),e("div",{ref:"list-content",staticClass:"list-content"},[e("ul",t._l(t.selectedFoods,function(s){return e("li",{staticClass:"selected-item"},[e("div",{staticClass:"amount-wrapper"},[e("Amount",{attrs:{food:s},on:{drop:t.dropBall,delFood:t.refreshList}})],1),t._v(" "),e("span",{staticClass:"price"},[t._v("￥"+t._s(s.price*s.count))]),t._v(" "),e("div",{staticClass:"foodname"},[t._v(t._s(s.name))])])}))])])]),t._v(" "),e("transition",{attrs:{name:"mask_fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&t.hasFood,expression:"show && hasFood"}],staticClass:"list-mask",on:{click:t.closeList}})])],1)},i=[],n={render:a,staticRenderFns:i};s.a=n},CEG9:function(t,s,e){"use strict";function a(t){e("i4vo")}var i=e("ORxm"),n=e("ckIS"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},CaK3:function(t,s,e){"use strict";function a(t){e("fv4A")}var i=e("Unm5"),n=e("1XBM"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,"data-v-5f8e1e1a",null);s.a=c.exports},EE5W:function(t,s){},I3Id:function(t,s){},"INt+":function(t,s,e){"use strict";s.a={props:{size:{type:Number},score:{type:Number}},computed:{starSize:function(){return"star-"+this.size},stars:function(){var t=void 0,s=[],e=Math.floor(this.score),a=this.score-e>=.5;for(t=0;t<e;t++)s.push("on");for(a&&(s.push("half"),t++);t<5;)s.push("off"),t++;return s}}}},JoGw:function(t,s){},LvwJ:function(t,s,e){"use strict";var a=e("hhm8"),i=e("9cao"),n=e("m3es"),o=e.n(n);s.a={props:{seller:{type:Object}},components:{Star:i.a},data:function(){var t=this;return{isFavo:function(){return a.a.getLocalStorage(t.seller.id,"isFavo",!1)}(),classMap:["decrease","discount","special","invoice","guarantee"]}},created:function(){var t=this;this.$nextTick(function(){t._initScroll()})},methods:{favoriteSeller:function(){this.isFavo=!this.isFavo,a.a.setLocalStorage(this.seller.id,"isFavo",this.isFavo)},_initScroll:function(){this.sellerScroll=new o.a(this.$refs.seller,{click:!0})}},computed:{favoText:function(){return this.isFavo?"已收藏":"未收藏"}}}},M93x:function(t,s,e){"use strict";function a(t){e("guPc")}var i=e("xJD8"),n=e("oCWL"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),i=e("M93x"),n=e("YaEn"),o=e("ORbq"),r=e("zO3H");e.n(r);a.a.use(o.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:n.a,template:"<App/>",components:{App:i.a}}),n.a.push("/goods")},NLX6:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"seller",staticClass:"seller-wrapper"},[e("div",{staticClass:"seller"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-top"},[e("h2",{staticClass:"title"},[t._v(t._s(t.seller.name))]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"star"},[e("Star",{attrs:{size:36,score:t.seller.score}})],1),t._v(" "),e("span",{staticClass:"rating-count"},[t._v("("+t._s(t.seller.ratingCount)+")")]),t._v(" "),e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])]),t._v(" "),e("div",{staticClass:"favorite",on:{click:t.favoriteSeller}},[e("span",{staticClass:"icon-favorite",class:{favo:t.isFavo}}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.favoText))])])]),t._v(" "),e("div",{staticClass:"overview-bottom"},[e("div",{staticClass:"min-price block"},[e("span",{staticClass:"title"},[t._v("起送价")]),t._v(" "),e("span",{staticClass:"text"},[e("strong",[t._v(t._s(t.seller.minPrice))]),t._v("元")])]),t._v(" "),e("div",{staticClass:"delivery-price block"},[e("span",{staticClass:"title"},[t._v("商家配送")]),t._v(" "),e("span",{staticClass:"text"},[e("strong",[t._v(t._s(t.seller.deliveryPrice))]),t._v("元")])]),t._v(" "),e("div",{staticClass:"delivery-time block"},[e("span",{staticClass:"title"},[t._v("平均配送时间")]),t._v(" "),e("span",{staticClass:"text"},[e("strong",[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟")])])])]),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("div",{staticClass:"promotion"},[e("h2",{staticClass:"title"},[t._v("公告与活动")]),t._v(" "),e("div",{staticClass:"bulletin"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("ul",t._l(t.seller.supports,function(s){return e("li",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.classMap[s.type]}),t._v(t._s(s.description))])}))]),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("div",{staticClass:"seller-pics"},[e("h2",{staticClass:"title"},[t._v("商家实景")]),t._v(" "),t._l(t.seller.pics,function(t){return e("img",{staticClass:"pic",attrs:{src:t}})})],2),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("div",{staticClass:"seller-info"},[e("h2",{staticClass:"title"},[t._v("商家信息")]),t._v(" "),e("ul",t._l(t.seller.infos,function(s){return e("li",{staticClass:"info"},[t._v(t._s(s))])}))])])])},i=[],n={render:a,staticRenderFns:i};s.a=n},NOy6:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"rating",staticClass:"rating-wrapper"},[e("div",{staticClass:"rating"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"header-left"},[e("div",{staticClass:"score"},[t._v(t._s(t.seller.score))]),t._v(" "),e("span",{staticClass:"title"},[t._v("综合评分")]),t._v(" "),e("div",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),t._v(" "),e("div",{staticClass:"header-right"},[e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("服务态度")]),t._v(" "),e("div",{staticClass:"star"},[e("Star",{attrs:{size:36,score:t.seller.serviceScore}})],1),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t.seller.serviceScore))])]),t._v(" "),e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("商品评分")]),t._v(" "),e("div",{staticClass:"star"},[e("Star",{attrs:{size:36,score:t.seller.foodScore}})],1),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t.seller.foodScore))])]),t._v(" "),e("div",{staticClass:"delivery"},[e("span",{staticClass:"title"},[t._v("送达时间")]),t._v(" "),e("span",{staticClass:"delivery-time"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("RatingSelector",{attrs:{ratings:t.ratings,positive:t.positiveRatings.length,negative:t.negativeRatings.length,contentFlag:t.contentFlag,currentType:t.currentType},on:{changeRatingType:t.changeRatings,onlyContent:t.contentOnly}},[e("h2",{staticClass:"title"},[t._v("商品评价")])]),t._v(" "),e("div",{staticClass:"ratinglist"},[e("ul",t._l(t.showRatings,function(s){return e("li",{staticClass:"rating-item"},[e("div",{staticClass:"header"},[e("img",{staticClass:"useravatar",attrs:{src:s.avatar}}),t._v(" "),e("span",{staticClass:"username"},[t._v(t._s(s.username))]),t._v(" "),e("div",{staticClass:"star"},[e("Star",{attrs:{size:24,score:s.score}})],1),t._v(" "),s.deliveryTime?e("span",{staticClass:"delivery-time"},[t._v(t._s(s.deliveryTime)+"分钟送达")]):t._e(),t._v(" "),e("div",{staticClass:"time"},[t._v(t._s(t.formatDate(s.rateTime)))])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{staticClass:"text"},[t._v(t._s(s.text))])]),t._v(" "),e("div",{staticClass:"recommend"},[e("span",{class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":1===s.rateType}}),t._v(" "),e("ul",{staticClass:"clearfix"},t._l(s.recommend,function(s){return e("li",{staticClass:"recommend-item"},[t._v(t._s(s))])}))])])}))])],1)])},i=[],n={render:a,staticRenderFns:i};s.a=n},ORxm:function(t,s,e){"use strict";var a=e("v2mk"),i=e("hhm8"),n=e("m3es"),o=e.n(n),r=e("94v0"),c=e("eAKN");s.a={props:{food:{type:Object}},components:{RatingSelector:r.a,Amount:c.a},data:function(){return{show:!1,cartShow:!0,currentType:"ALL",contentFlag:!1,toggle:""}},created:function(){var t=this;a.a.$on("showBtn",function(s){t.cartShow=s,s&&(t.toggle="toggle")})},computed:{positiveRatings:function(){return this.food.ratings.filter(function(t){return 0===t.rateType})},negativeRatings:function(){return this.food.ratings.filter(function(t){return 1===t.rateType})},showRatings:function(){var t=void 0;return t="ALL"===this.currentType?this.food.ratings:"POSI"===this.currentType?this.positiveRatings:this.negativeRatings,this.contentFlag&&(t=t.filter(function(t){return t.text.length>0})),this.detailScroll&&this.refreshScroll(),t}},methods:{showDetail:function(){var t=this;this.show=!0,this.food.count?this.cartShow=!1:this.cartShow=!0,this.currentType="ALL",this.contentFlag=!1,this.detailScroll?this.refreshScroll():this.$nextTick(function(){t._initScroll()})},hideDetail:function(){this.show=!1,this.toggle=""},formatDate:function(t){return i.a.formatDate(t)},changeRatings:function(t){this.currentType=t},contentOnly:function(t){this.contentFlag=!this.contentFlag},refreshScroll:function(){var t=this;this.$nextTick(function(){t.detailScroll.refresh()})},beforeLeave:function(t){this.toggle&&t.className.includes("add-cart")&&(t.textContent="")},afterEnter:function(t){var s=this;if(this.show&&"food-comp-amount"===t.id&&this.toggle){this.food.count=1;var e=t.querySelector(".amount-increase");a.a.$emit("drop",e),setTimeout(function(){s.hideDetail()},200)}},firstAdd:function(){this.toggle="toggle",this.cartShow=!1},_initScroll:function(){this.detailScroll=new o.a(this.$refs.foods,{click:!0})}}}},P3u6:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating-selector"},[t._t("default"),t._v(" "),e("div",{staticClass:"rating-type"},[e("span",{staticClass:"button positive",class:{active:"ALL"===t.currentType},on:{click:function(s){t.selectRatings("ALL")}}},[t._v(t._s("全部 "+t.ratings.length))]),t._v(" "),e("span",{staticClass:"button positive",class:{active:"POSI"===t.currentType},on:{click:function(s){t.selectRatings("POSI")}}},[t._v(t._s("推荐 "+t.positive))]),t._v(" "),e("span",{staticClass:"button negative",class:{active:"NEGA"===t.currentType},on:{click:function(s){t.selectRatings("NEGA")}}},[t._v(t._s("吐槽 "+t.negative))])]),t._v(" "),e("div",{staticClass:"content-only",on:{click:t.toggleContent}},[e("span",{staticClass:"icon-check_circle",class:{active:t.contentFlag}}),t._v(" "),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])],2)},i=[],n={render:a,staticRenderFns:i};s.a=n},UEaH:function(t,s){},Unm5:function(t,s,e){"use strict";var a=e("9cao"),i=e("m3es"),n=e.n(i);s.a={props:{seller:{type:Object}},data:function(){return{detail:!1,classMap:["decrease","discount","special","invoice","guarantee"]}},methods:{showDetail:function(){var t=this;this.detail=!0,this.$nextTick(function(){t._initScroll()})},hideDetail:function(){this.detail=!1},_initScroll:function(){this.detailScroll=new n.a(this.$refs.detail,{click:!0})}},components:{Star:a.a}}},XoRz:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"amount"},[e("transition-group",{key:"remove_rotate",attrs:{name:"rotate"},on:{"after-leave":t.afterLeave}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],key:"decrease",staticClass:"amount-decrease",attrs:{"data-flag":"amount"},on:{click:function(s){s.stopPropagation(),t.decreaseAmount(s)}}},[e("span",{staticClass:"icon-remove_circle_outline",attrs:{"data-flag":"amount"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],key:"count",ref:"food-count",staticClass:"amount-count",attrs:{"data-flag":"amount"}},[t._v(t._s(t.foodCount))])]),t._v(" "),e("div",{staticClass:"amount-increase",attrs:{"data-flag":"amount"},on:{click:function(s){s.stopPropagation(),t.addAmount(s)}}},[e("span",{staticClass:"icon-add_circle",attrs:{"data-flag":"amount"}})])],1)},i=[],n={render:a,staticRenderFns:i};s.a=n},YaEn:function(t,s,e){"use strict";var a=e("7+uW"),i=e("/ocq"),n=e("dfnC"),o=e("0G9v"),r=e("ZWu5");a.a.use(i.a),s.a=new i.a({linkActiveClass:"active",routes:[{path:"/goods",name:"Goods",component:n.a},{path:"/rating",name:"Rating",component:o.a},{path:"/seller",name:"Seller",component:r.a}]})},ZWu5:function(t,s,e){"use strict";function a(t){e("I3Id")}var i=e("LvwJ"),n=e("NLX6"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},"cUu/":function(t,s,e){"use strict";var a=e("v2mk"),i=e("eAKN"),n=e("m3es"),o=e.n(n);s.a={props:{deliveryPrice:{type:Number,defalut:0},minPrice:{type:Number,default:0},selectedFoods:{type:Array}},data:function(){return{show:!1,balls:[{show:!1},{show:!1},{show:!1}],droppingBalls:[]}},created:function(){var t=this;a.a.$on("drop",function(s){t.dropBall(s)}),this.$nextTick(function(){t.selectedFoodScroll=new o.a(t.$refs["list-content"],{click:!0})})},computed:{hasFood:function(){return this.totalCount>0},totalPrice:function(){var t=0;return this.selectedFoods.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectedFoods.forEach(function(s){t+=s.count}),t},payInfo:function(){return 0===this.totalCount?"￥"+this.minPrice+"起送":this.totalPrice<this.minPrice?"还差￥"+(this.minPrice-this.totalPrice)+"起送":"去支付"}},methods:{toggleList:function(){var t=this;this.totalCount>0&&(this.show=!this.show,this.$nextTick(function(){t.refreshList()}))},emptyList:function(){this.selectedFoods.forEach(function(t){t.count=0}),this.closeList()},closeList:function(){this.show=!1},refreshList:function(){var t=this;this.hasFood?this.$nextTick(function(){t.selectedFoodScroll.refresh()}):this.closeList()},dropBall:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.el=t,e.show=!0,void this.droppingBalls.push(e)}},beforeEnter:function(t){for(var s=this.balls.length;s--;){var e=this.balls[s];if(e.show){var a=e.el.getBoundingClientRect(),i=a.left-32,n=-(window.innerHeight-a.top-20);t.style.transform="translate3d(0,"+n+"px,0)";t.getElementsByClassName("inner")[0].style.transform="translate3d("+i+"px,0,0)"}}},enter:function(t,s){t.offsetHeight,this.$nextTick(function(){t.style.transform="translate3d(0px, 0, 0)",t.getElementsByClassName("inner")[0].style.transform="translate3d(0, 0, 0)"}),setTimeout(s,399)},afterEnter:function(t){var s=this.droppingBalls.shift();s&&(s.show=!1,t.style.display="none")}},components:{Amount:i.a}}},ckIS:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{key:"food_fade",attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"foods",staticClass:"food-wrapper"},[e("div",{staticClass:"food"},[e("div",{staticClass:"image",on:{click:t.hideDetail}},[e("img",{attrs:{src:t.food.image}})]),t._v(" "),e("div",{staticClass:"food-info-wrapper"},[e("div",{staticClass:"food-info"},[e("h2",{staticClass:"name"},[t._v(t._s(t.food.name))]),t._v(" "),e("div",{staticClass:"food-other"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),t._v(" "),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),e("div",{staticClass:"food-price"},[e("span",{staticClass:"price"},[t._v("￥"+t._s(t.food.price))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old-price"},[t._v("￥"+t._s(t.food.oldPrice))])]),t._v(" "),e("transition",{attrs:{name:t.toggle,mode:"out-in"},on:{"before-leave":t.beforeLeave,"after-enter":t.afterEnter}},[t.cartShow&&!t.food.count?e("div",{key:"add_cart",staticClass:"add-cart",on:{click:t.firstAdd}},[t._v("加入购物车")]):e("div",{key:"food_amount",staticClass:"amount-wrapper",attrs:{id:"food-comp-amount"}},[e("Amount",{attrs:{food:t.food}})],1)])],1)]),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("div",{staticClass:"food-desc-wrapper"},[t.food.info?e("div",{staticClass:"food-desc"},[e("h3",{staticClass:"title"},[t._v("商品介绍")]),t._v(" "),e("p",{staticClass:"desc"},[t._v(t._s(t.food.info))])]):e("div",{staticClass:"no-info"},[t._v("暂无商品介绍")])]),t._v(" "),e("div",{staticClass:"f-divider"}),t._v(" "),e("RatingSelector",{attrs:{ratings:t.food.ratings,positive:t.positiveRatings.length,negative:t.negativeRatings.length,contentFlag:t.contentFlag,currentType:t.currentType},on:{changeRatingType:t.changeRatings,onlyContent:t.contentOnly}},[e("h2",{staticClass:"title"},[t._v("商品评价")])]),t._v(" "),e("div",{staticClass:"ratinglist"},[e("ul",t._l(t.showRatings,function(s){return e("li",{staticClass:"rating"},[e("div",{staticClass:"header"},[e("div",{staticClass:"time"},[t._v(t._s(t.formatDate(s.rateTime)))]),t._v(" "),e("div",{staticClass:"user"},[e("span",{staticClass:"username"},[t._v(t._s(s.username))]),t._v(" "),e("img",{staticClass:"useravatar",attrs:{src:s.avatar}})])]),t._v(" "),e("div",{staticClass:"content"},[e("span",{class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":1===s.rateType}}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.text))])])])}))])],1)])])},i=[],n={render:a,staticRenderFns:i};s.a=n},dfnC:function(t,s,e){"use strict";function a(t){e("hBH9")}var i=e("+JyT"),n=e("kLGG"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,null,null);s.a=c.exports},eAKN:function(t,s,e){"use strict";function a(t){e("pIEs")}var i=e("ezDg"),n=e("XoRz"),o=e("VU/8"),r=a,c=o(i.a,n.a,r,"data-v-390f1693",null);s.a=c.exports},ezDg:function(t,s,e){"use strict";var a=e("v2mk");s.a={props:{food:{type:Object}},computed:{foodCount:function(){return 0===this.food.count?1:this.food.count}},methods:{addAmount:function(t){this.food.count++,a.a.$emit("showBtn",!1),a.a.$emit("drop",t.target)},decreaseAmount:function(t){this.food.count>0&&0===--this.food.count&&this.$emit("delFood")},afterLeave:function(t){a.a.$emit("showBtn",!0)}},created:function(){void 0===this.food.count&&this.$set(this.food,"count",0)}}},f2Ry:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:t.starSize},t._l(t.stars,function(t){return e("span",{staticClass:"star-item",class:t})}))},i=[],n={render:a,staticRenderFns:i};s.a=n},fv4A:function(t,s){},guPc:function(t,s){},hBH9:function(t,s){},hhm8:function(t,s,e){"use strict";var a=e("mvHQ"),i=e.n(a),n={formatDate:function(t){function s(t){return t<10?"0"+t:t}var e=new Date(t);return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"  "+s(e.getHours())+":"+s(e.getMinutes())},urlParse:function(){var t={},s=window.location.search,e=s.match(/^[?&][^?&]+=[^?&]+/g);return e&&e.forEach(function(s){var e=s.substring(1).split("="),a=decodeURIComponent(e[0]),i=decodeURIComponent(e[1]);t[a]=i}),t},setLocalStorage:function(t,s,e){var a=window.localStorage.__seller__;a?(a=JSON.parse(a),a[t]||(a[t]={})):(a={},a[t]={}),a[t][s]=e,window.localStorage.__seller__=i()(a)},getLocalStorage:function(t,s,e){var a=window.localStorage.__seller__;return a?(a=JSON.parse(a)[t],a?a[s]||e:e):e}};s.a=n},i4vo:function(t,s){},kLGG:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{ref:"goods-type",staticClass:"goods-type-wrapper"},[e("ul",t._l(t.goods,function(s,a){return e("li",{staticClass:"goods-type-item",class:{current:t.currentIndex===a},on:{click:function(s){t.scrollFoods(a)}}},[e("span",{staticClass:"foodname"},[s.type>0?e("span",{staticClass:"icon",class:t.classMap[s.type]}):t._e(),t._v(t._s(s.name))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.goodsTypeCount[a]>0,expression:"goodsTypeCount[index]>0"}],staticClass:"count"},[t._v(t._s(t.goodsTypeCount[a]))])])}))]),t._v(" "),e("div",{ref:"foods",staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(s){return e("li",{staticClass:"foods-type"},[e("h2",{staticClass:"foods-type-name"},[t._v(t._s(s.name))]),t._v(" "),e("ul",t._l(s.foods,function(s){return e("li",{staticClass:"foods-item",on:{"!click":function(e){t.selectFood(s,e)}}},[e("img",{staticClass:"foods-icon",attrs:{src:s.icon,width:"57",height:"57"}}),t._v(" "),e("div",{staticClass:"foods-detail"},[e("h3",{staticClass:"foods-name"},[t._v(t._s(s.name))]),t._v(" "),e("p",{staticClass:"foods-description"},[t._v(t._s(s.description))]),t._v(" "),e("div",{staticClass:"foods-other"},[e("span",{staticClass:"foods-count"},[t._v("月售"+t._s(s.sellCount)+"份")]),t._v(" "),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),e("div",{staticClass:"foods-price"},[e("span",{staticClass:"price"},[t._v("￥"+t._s(s.price))]),t._v(" "),s.oldPrice?e("span",{staticClass:"old-price"},[t._v("￥"+t._s(s.oldPrice))]):t._e()]),t._v(" "),e("div",{staticClass:"amount-wrapper"},[e("amount",{attrs:{food:s}})],1)])])}))])}))]),t._v(" "),e("shop-cart",{attrs:{"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice,"selected-foods":t.selectedFoods}}),t._v(" "),e("food",{ref:"food-detail",attrs:{food:t.selectedFood}})],1)},i=[],n={render:a,staticRenderFns:i};s.a=n},mpyR:function(t,s){},oCWL:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("v-header",{attrs:{seller:t.seller}}),t._v(" "),e("div",{staticClass:"tab"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/rating"}},[t._v("评价")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),t._v(" "),e("keep-alive",[e("router-view",{attrs:{seller:t.seller}})],1)],1)},i=[],n={render:a,staticRenderFns:i};s.a=n},pIEs:function(t,s){},q6IL:function(t,s,e){"use strict";var a=e("hhm8"),i=e("9cao"),n=e("94v0"),o=e("m3es"),r=e.n(o);s.a={props:{seller:{type:Object}},components:{Star:i.a,RatingSelector:n.a},data:function(){return{ratings:[],currentType:"ALL",contentFlag:!1}},created:function(){var t=this;this.$http.get("/api/ratings").then(function(s){s=s.body,0===s.errno&&(t.ratings=s.data,t.$nextTick(function(){t._initScroll()}))})},methods:{formatDate:function(t){return a.a.formatDate(t)},changeRatings:function(t){this.currentType=t},contentOnly:function(t){this.contentFlag=!this.contentFlag},_initScroll:function(){this.ratingScroll=new r.a(this.$refs.rating,{click:!0})},refreshScroll:function(){var t=this;this.$nextTick(function(){t.ratingScroll.refresh()})}},computed:{positiveRatings:function(){return this.ratings.filter(function(t){return 0===t.rateType})},negativeRatings:function(){return this.ratings.filter(function(t){return 1===t.rateType})},showRatings:function(){var t=void 0;return t="ALL"===this.currentType?this.ratings:"POSI"===this.currentType?this.positiveRatings:this.negativeRatings,this.contentFlag&&(t=t.filter(function(t){return t.text.length>0})),this.ratingScroll&&this.refreshScroll(),t}}}},v2mk:function(t,s,e){"use strict";var a=e("7+uW");s.a=new a.a},xJD8:function(t,s,e){"use strict";var a=e("woOf"),i=e.n(a),n=e("hhm8"),o=e("CaK3");s.a={name:"app",data:function(){return{seller:{id:function(){return n.a.urlParse().id}()}}},created:function(){var t=this;this.$http.get("api/seller").then(function(s){s=s.body,0===s.errno&&(t.seller=i()({},t.seller,s.data))})},components:{"v-header":o.a}}},zO3H:function(t,s){}},["NHnr"]);